{"ast":null,"code":"import _taggedTemplateLiteral from \"/home/emily/Documents/spring22/capstone/22A482-TripPlanner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _slicedToArray from \"/home/emily/Documents/spring22/capstone/22A482-TripPlanner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/emily/Documents/spring22/capstone/22A482-TripPlanner/src/Detail Subpages/AddFlight.js\",\n    _templateObject,\n    _templateObject2,\n    _templateObject3,\n    _templateObject4;\n\nimport React from 'react';\nimport styled from 'styled-components';\nimport Nav from '../Components/Nav';\nimport Footer from '../Components/Footer';\nimport Flight from \"../Components/Flight\";\nimport { connect } from \"react-redux\";\nimport Loading from '../Components/Loading';\nimport { store } from '../store/TripUsStore';\nimport FlightCard from '../Components/FlightCard';\nimport TripNav from '../Components/TripNav';\n\nfunction AddFlight(props) {\n  var _this = this;\n\n  var flightFilter;\n\n  if (props.auth.filtData) {\n    flightFilter = props.auth.filtData;\n    sessionStorage.setItem('FlightFilterData', JSON.stringify(props.auth.filtData));\n  } else {\n    flightFilter = JSON.parse(sessionStorage.getItem('FlightFilterData'));\n    store.dispatch({\n      type: 'FILTER_DATA',\n      payload: flightFilter\n    });\n  } // if (props.auth.locData) {\n  //     sessionStorage.setItem('LocData1', props.auth.locData);\n  // } else {\n  //     loc = sessionStorage.getItem('LocData1');\n  //     store.dispatch({type: 'LOCATION_DATA', payload: loc});\n  // }\n  //\n  // if (props.auth.locData2) {\n  //     sessionStorage.setItem('LocData2', props.auth.locData2);\n  // } else {\n  //     loc2 = sessionStorage.getItem('LocData2');\n  //     store.dispatch({type: 'LOCATION_DATA2', payload: loc2});\n  // }\n\n\n  var request = require('request');\n\n  var departureOptions = {\n    method: 'GET',\n    url: 'https://priceline-com-provider.p.rapidapi.com/v1/flights/locations',\n    qs: {\n      name: flightFilter.departurecode\n    },\n    headers: {\n      'X-RapidAPI-Host': 'priceline-com-provider.p.rapidapi.com',\n      'X-RapidAPI-Key': '2b62108746msh76814bb9977a1f3p186515jsn0c0667276365',\n      useQueryString: true\n    }\n  };\n  var arrivalOptions = {\n    method: 'GET',\n    url: 'https://priceline-com-provider.p.rapidapi.com/v1/flights/locations',\n    qs: {\n      name: flightFilter.arrivalcode\n    },\n    headers: {\n      'X-RapidAPI-Host': 'priceline-com-provider.p.rapidapi.com',\n      'X-RapidAPI-Key': '2b62108746msh76814bb9977a1f3p186515jsn0c0667276365',\n      useQueryString: true\n    }\n  };\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      isLoc = _React$useState2[0],\n      setIsLoc = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      isLoc2 = _React$useState4[0],\n      setIsLoc2 = _React$useState4[1];\n\n  React.useEffect(function () {\n    request(departureOptions, function (error, response, body) {\n      if (error) throw new Error(error);\n      var result = JSON.parse(body);\n\n      if (!result[0]) {\n        store.dispatch({\n          type: 'FLIGHT_DATA',\n          payload: \"none\"\n        });\n        return;\n      }\n\n      store.dispatch({\n        type: 'LOCATION_DATA',\n        payload: result[0].id\n      });\n      setIsLoc(true);\n    });\n  }, []);\n  React.useEffect(function () {\n    request(arrivalOptions, function (error, response, body) {\n      if (error) throw new Error(error);\n      var result = JSON.parse(body);\n\n      if (!result[0]) {\n        store.dispatch({\n          type: 'FLIGHT_DATA',\n          payload: \"none\"\n        });\n        return;\n      }\n\n      store.dispatch({\n        type: 'LOCATION_DATA2',\n        payload: result[0].id\n      });\n      setIsLoc2(true);\n    });\n  }, [isLoc]);\n  React.useEffect(function () {\n    console.log(props.auth.locData);\n    console.log(props.auth.locData2);\n\n    if (props.auth.locData && props.auth.locData2) {\n      var options = {\n        method: 'GET',\n        url: 'https://priceline-com-provider.p.rapidapi.com/v2/flight/departures',\n        qs: {\n          departure_date: props.auth.filtData.departure,\n          sid: 'iSiX639',\n          adults: 1,\n          destination_airport_code: props.auth.locData2,\n          origin_airport_code: props.auth.locData\n        },\n        headers: {\n          'X-RapidAPI-Host': 'priceline-com-provider.p.rapidapi.com',\n          'X-RapidAPI-Key': '2b62108746msh76814bb9977a1f3p186515jsn0c0667276365',\n          useQueryString: true\n        }\n      };\n      request(options, function (error, response, body) {\n        if (error) throw new Error(error);\n        console.log(JSON.parse(body));\n        var dataArr = [];\n\n        if (!JSON.parse(body).getAirFlightDepartures.results) {\n          store.dispatch({\n            type: 'FLIGHT_DATA',\n            payload: \"none\"\n          });\n          return;\n        }\n\n        var data = JSON.parse(body).getAirFlightDepartures.results.result.itinerary_data;\n        var keys = Object.keys(data);\n        keys.forEach(function (key, index) {\n          console.log(\"\".concat(key, \": \").concat(data[key]));\n          dataArr.push(data[key]);\n        });\n        store.dispatch({\n          type: 'FLIGHT_DATA',\n          payload: dataArr\n        });\n      });\n    }\n  }, [isLoc2, isLoc]);\n\n  if (!props.auth.flightData) {\n    return /*#__PURE__*/React.createElement(Loading, {\n      message: \"Finding Available Flights...\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 13\n      }\n    });\n  }\n\n  console.log(props.auth.flightData);\n\n  var NoResult = function NoResult() {\n    return /*#__PURE__*/React.createElement(\"h1\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 16\n      }\n    }, \"No flights found. Please make sure that you have entered correct date and locations.\");\n  };\n\n  var dataArr = [];\n\n  if (props.auth.flightData !== \"none\" && flightFilter.maxprice) {\n    props.auth.flightData.map(function (flight) {\n      if (flight.price_details.baseline_base_fare <= flightFilter.maxprice) {\n        dataArr.push(flight);\n      }\n    });\n\n    if (dataArr.length === 0) {\n      store.dispatch({\n        type: 'FLIGHT_DATA',\n        payload: \"none\"\n      });\n    }\n  } else {\n    dataArr = props.auth.flightData;\n  }\n\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Nav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TripNav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 9\n    }\n  }, \"Flights\", props.auth.flightData !== \"none\" && /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 50\n    }\n  }) && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 63\n    }\n  }, dataArr[0].slice_data.slice_0.departure.airport.city, \" \", dataArr[0].slice_data.slice_0.departure.airport.state, \" -> \", dataArr[0].slice_data.slice_0.arrival.airport.city, \" \", dataArr[0].slice_data.slice_0.arrival.airport.state)), props.auth.flightData === \"none\" ? /*#__PURE__*/React.createElement(NoResult, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 45\n    }\n  }) : dataArr.map(function (flight) {\n    return /*#__PURE__*/React.createElement(FlightCard, {\n      flight: flight,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 21\n      }\n    });\n  })), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }\n  }));\n}\n\nvar Container = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n \\n\"])));\nvar Content = styled.div(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n    display: flex;\\n    flex-direction: column;\\n    padding: 100px 10% 0 10%;\\n    align-items: center;\\n    min-height: 100vh;\\n    align-items: center;\\n    text-align: center; \\n\"])));\nvar Title = styled.p(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n  text-align: center;\\n  margin: 50px 0;\\n  font-size: 36px;\\n\"])));\nvar CreateGroup = styled.div(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  border: none;\\n  padding: 0px 5px;\\n  border-radius: 20px;\\n  background-color: #308446;\\n  transition: 600ms;\\n  cursor: pointer;\\n  align-items: center;\\n  p {\\n    color: white;\\n    font-size: 16px;\\n    margin-right: 5px;\\n  }\\n  img{\\n    height: 30px;\\n    width: 30px;\\n  }\\n  \\n  &:hover {\\n      transition: 600ms;\\n      transform: scale(1.2);\\n    }\\n\"])));\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return state;\n};\n\nexport default connect(mapStateToProps)(AddFlight);","map":{"version":3,"sources":["/home/emily/Documents/spring22/capstone/22A482-TripPlanner/src/Detail Subpages/AddFlight.js"],"names":["React","styled","Nav","Footer","Flight","connect","Loading","store","FlightCard","TripNav","AddFlight","props","flightFilter","auth","filtData","sessionStorage","setItem","JSON","stringify","parse","getItem","dispatch","type","payload","request","require","departureOptions","method","url","qs","name","departurecode","headers","useQueryString","arrivalOptions","arrivalcode","useState","isLoc","setIsLoc","isLoc2","setIsLoc2","useEffect","error","response","body","Error","result","id","console","log","locData","locData2","options","departure_date","departure","sid","adults","destination_airport_code","origin_airport_code","dataArr","getAirFlightDepartures","results","data","itinerary_data","keys","Object","forEach","key","index","push","flightData","NoResult","maxprice","map","flight","price_details","baseline_base_fare","length","slice_data","slice_0","airport","city","state","arrival","Container","div","Content","Title","p","CreateGroup","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport Nav from '../Components/Nav';\nimport Footer from '../Components/Footer';\nimport Flight from \"../Components/Flight\";\nimport {connect} from \"react-redux\";\nimport Loading from '../Components/Loading';\nimport { store } from '../store/TripUsStore';\nimport FlightCard from '../Components/FlightCard'\nimport TripNav from '../Components/TripNav';\n\nfunction AddFlight(props) {\n  let flightFilter\n\n  if (props.auth.filtData) {\n      flightFilter = props.auth.filtData\n    sessionStorage.setItem('FlightFilterData', JSON.stringify(props.auth.filtData));\n  } else {\n    flightFilter = JSON.parse(sessionStorage.getItem('FlightFilterData'));\n    store.dispatch({type: 'FILTER_DATA', payload: flightFilter});\n  }\n\n    // if (props.auth.locData) {\n    //     sessionStorage.setItem('LocData1', props.auth.locData);\n    // } else {\n    //     loc = sessionStorage.getItem('LocData1');\n    //     store.dispatch({type: 'LOCATION_DATA', payload: loc});\n    // }\n    //\n    // if (props.auth.locData2) {\n    //     sessionStorage.setItem('LocData2', props.auth.locData2);\n    // } else {\n    //     loc2 = sessionStorage.getItem('LocData2');\n    //     store.dispatch({type: 'LOCATION_DATA2', payload: loc2});\n    // }\n\n    const request = require('request');\n\n    const departureOptions = {\n        method: 'GET',\n        url: 'https://priceline-com-provider.p.rapidapi.com/v1/flights/locations',\n        qs: {name: flightFilter.departurecode},\n        headers: {\n            'X-RapidAPI-Host': 'priceline-com-provider.p.rapidapi.com',\n            'X-RapidAPI-Key': '2b62108746msh76814bb9977a1f3p186515jsn0c0667276365',\n            useQueryString: true\n        }\n    };\n\n    const arrivalOptions = {\n        method: 'GET',\n        url: 'https://priceline-com-provider.p.rapidapi.com/v1/flights/locations',\n        qs: {name: flightFilter.arrivalcode},\n        headers: {\n            'X-RapidAPI-Host': 'priceline-com-provider.p.rapidapi.com',\n            'X-RapidAPI-Key': '2b62108746msh76814bb9977a1f3p186515jsn0c0667276365',\n            useQueryString: true\n        }\n    };\n\n    const [isLoc, setIsLoc] = React.useState(false);\n    const [isLoc2, setIsLoc2] = React.useState(false);\n    React.useEffect(() => {\n        request(departureOptions, function (error, response, body) {\n            if (error) throw new Error(error);\n            const result = JSON.parse(body)\n            if (!result[0]) {\n                store.dispatch({type: 'FLIGHT_DATA', payload: \"none\"})\n                return\n            }\n            store.dispatch({type: 'LOCATION_DATA', payload: result[0].id})\n            setIsLoc(true)\n        });\n    }, []);\n\n    React.useEffect(() => {\n\n        request(arrivalOptions, function (error, response, body) {\n            if (error) throw new Error(error);\n            const result = JSON.parse(body)\n            if (!result[0]) {\n                store.dispatch({type: 'FLIGHT_DATA', payload: \"none\"})\n                return\n            }\n            store.dispatch({type: 'LOCATION_DATA2', payload: result[0].id})\n            setIsLoc2(true)\n        });\n    }, [isLoc]);\n\n\n\n\n    React.useEffect(() => {\n        console.log(props.auth.locData)\n        console.log(props.auth.locData2)\n        if (props.auth.locData && props.auth.locData2) {\n            const options = {\n                method: 'GET',\n                url: 'https://priceline-com-provider.p.rapidapi.com/v2/flight/departures',\n                qs: {\n                    departure_date: props.auth.filtData.departure,\n                    sid: 'iSiX639',\n                    adults: 1,\n                    destination_airport_code: props.auth.locData2,\n                    origin_airport_code: props.auth.locData\n                },\n                headers: {\n                    'X-RapidAPI-Host': 'priceline-com-provider.p.rapidapi.com',\n                    'X-RapidAPI-Key': '2b62108746msh76814bb9977a1f3p186515jsn0c0667276365',\n                    useQueryString: true\n                }\n            };\n\n            request(options, function (error, response, body) {\n                if (error) throw new Error(error);\n                console.log(JSON.parse(body))\n                let dataArr = []\n                if (!JSON.parse(body).getAirFlightDepartures.results) {\n                    store.dispatch({type: 'FLIGHT_DATA', payload: \"none\"})\n                    return\n                }\n                const data = JSON.parse(body).getAirFlightDepartures.results.result.itinerary_data\n                const keys = Object.keys(data)\n                keys.forEach((key, index) => {\n                    console.log(`${key}: ${data[key]}`)\n                    dataArr.push(data[key])\n                })\n                store.dispatch({type: 'FLIGHT_DATA', payload: dataArr})\n            });\n        }\n    }, [isLoc2, isLoc]);\n\n    if (!props.auth.flightData) {\n\n        return (\n            <Loading message=\"Finding Available Flights...\" />\n        )\n\n    }\n\n    console.log(props.auth.flightData)\n\n    const NoResult = () => {\n        return <h1>No flights found. Please make sure that you have entered correct date and locations.</h1>\n    }\n\n    let dataArr = []\n    if (props.auth.flightData !== \"none\" && flightFilter.maxprice) {\n        props.auth.flightData.map((flight) => {\n            if (flight.price_details.baseline_base_fare <= flightFilter.maxprice) {\n                dataArr.push(flight)\n            }\n        })\n\n        if (dataArr.length === 0) {\n            store.dispatch({type: 'FLIGHT_DATA', payload: \"none\"})\n        }\n    } else {\n        dataArr = props.auth.flightData\n    }\n\n  return (\n    <Container>\n      <Nav />\n      <Content>\n        <TripNav />\n        <Title>Flights\n            {props.auth.flightData !== \"none\" && <br></br> && <p>{dataArr[0].slice_data.slice_0.departure.airport.city} {dataArr[0].slice_data.slice_0.departure.airport.state} -> {dataArr[0].slice_data.slice_0.arrival.airport.city} {dataArr[0].slice_data.slice_0.arrival.airport.state}</p>}\n        </Title>\n\n        {props.auth.flightData === \"none\" ? <NoResult/> : dataArr.map((flight) => {\n            return (<FlightCard flight={flight}/>);\n        })}\n      </Content>\n      <Footer />\n    </Container>\n  )\n}\n\nconst Container = styled.div`\n \n`;\n\nconst Content = styled.div`\n    display: flex;\n    flex-direction: column;\n    padding: 100px 10% 0 10%;\n    align-items: center;\n    min-height: 100vh;\n    align-items: center;\n    text-align: center; \n`;\n\nconst Title = styled.p`\n  text-align: center;\n  margin: 50px 0;\n  font-size: 36px;\n`;\n\nconst CreateGroup = styled.div`\n  display: flex;\n  border: none;\n  padding: 0px 5px;\n  border-radius: 20px;\n  background-color: #308446;\n  transition: 600ms;\n  cursor: pointer;\n  align-items: center;\n  p {\n    color: white;\n    font-size: 16px;\n    margin-right: 5px;\n  }\n  img{\n    height: 30px;\n    width: 30px;\n  }\n  \n  &:hover {\n      transition: 600ms;\n      transform: scale(1.2);\n    }\n`;\n\nconst mapStateToProps = (state) => {\n    return state;\n}\n\nexport default connect(mapStateToProps)(AddFlight);"]},"metadata":{},"sourceType":"module"}