{"ast":null,"code":"import _slicedToArray from \"/home/emily/Documents/spring22/capstone/22A482-TripPlanner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/home/emily/Documents/spring22/capstone/22A482-TripPlanner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _templateObject,\n    _templateObject2,\n    _jsxFileName = \"/home/emily/Documents/spring22/capstone/22A482-TripPlanner/src/Pages/MyTrips.js\",\n    _templateObject3,\n    _templateObject4,\n    _templateObject5,\n    _templateObject6,\n    _templateObject7,\n    _templateObject8,\n    _templateObject9,\n    _templateObject10;\n\nimport React, { useEffect } from 'react';\nimport styled from 'styled-components';\nimport Nav from '../Components/Nav';\nimport Footer from '../Components/Footer';\nimport Trip from \"../Components/Trip\";\nimport { gql, useMutation, useQuery } from \"@apollo/client\";\nimport { connect } from \"react-redux\";\nimport Loading from '../Components/Loading';\nimport PlusDark from '../Images/Icons/DarkMode/PlusLight.png';\nimport { useNavigate } from \"react-router\";\nimport TrashDark from '../Images/Icons/DarkMode/TrashLight.png';\nimport SettingsDark from '../Images/Icons/DarkMode/SettingsLight.png';\n\nfunction MyTrips(props) {\n  var _this = this;\n\n  var groupId = null;\n  var groupInfo = null;\n  console.log(props);\n\n  if (props && props.auth && props.auth.groupInfo) {\n    sessionStorage.setItem('groupInfo', JSON.stringify(props.auth.groupInfo));\n    groupId = props.auth.groupInfo.Group_ID;\n    groupInfo = props.auth.groupInfo;\n  } else {\n    groupInfo = JSON.parse(sessionStorage.getItem('groupInfo'));\n    groupId = groupInfo.Group_ID;\n  }\n\n  var userProfile = props.auth.userProfile;\n  console.log(userProfile);\n  console.log(groupInfo);\n  var history = useNavigate();\n\n  function handleRoute(route) {\n    history(route);\n  }\n\n  var DELETE_GROUP = gql(_templateObject || (_templateObject = _taggedTemplateLiteral([\"mutation deleteGroup ($Group_ID: Int!){\\n    delete_Group_by_pk(Group_ID: $Group_ID) {\\n      Group_ID\\n    }\\n  }\"])));\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      pressedDelete = _React$useState2[0],\n      setPressedDelete = _React$useState2[1];\n\n  function DeleteGroupFunction() {\n    setPressedDelete(true);\n  }\n\n  var HandleGroupDeletion = function HandleGroupDeletion() {\n    var _useMutation = useMutation(DELETE_GROUP),\n        _useMutation2 = _slicedToArray(_useMutation, 1),\n        deleteGroup = _useMutation2[0];\n\n    if (pressedDelete) {\n      var proceed = window.confirm(\"Are you sure you want to delete the \".concat(groupInfo.Group_Name, \" group\"));\n\n      if (proceed) {\n        console.log(groupId);\n        useEffect(function () {\n          deleteGroup({\n            variables: {\n              Group_ID: groupId\n            }\n          });\n        }, []);\n        setPressedDelete(function (current) {\n          return !current;\n        });\n      }\n    }\n\n    handleRoute('/myGroups');\n    window.location.reload(false);\n    return null;\n  };\n\n  var GET_TRIPS = gql(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"query GetTripTrips ($Group_ID: Int!){\\n    Trip_memberships(where: {Group_ID: {_eq: $Group_ID}}) {\\n      Trip {\\n        Trip_ID\\n        Destinations\\n        Start_Date\\n        End_Date\\n        Trip_Bio\\n        Trip_Name\\n        Trip_Image\\n        Departures\\n      }\\n    }\\n}\"])));\n\n  var _useQuery = useQuery(GET_TRIPS, {\n    variables: {\n      Group_ID: groupId\n    }\n  }),\n      data = _useQuery.data,\n      error = _useQuery.error,\n      loading = _useQuery.loading;\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(Loading, {\n      message: \"Time To Hurt The Bank Account...\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 7\n      }\n    });\n  }\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 12\n      }\n    }, error);\n  }\n\n  var isCoLeader = groupInfo.memberships.map(function (member) {\n    if (member.User.User_ID === userProfile.User_ID && member.Role === \"Co-Leader\") {\n      return true;\n    }\n\n    return false;\n  });\n  console.log(isCoLeader);\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Nav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, groupInfo.Group_Name, \" Trip's\")), /*#__PURE__*/React.createElement(DeleteGroup, {\n    src: TrashDark,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }), data && data.Trip_memberships.length === 0 ? groupInfo.Leader_ID === userProfile.User_ID || isCoLeader.includes(true) ? /*#__PURE__*/React.createElement(NoTrips, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(GroupNavButton, {\n    onClick: function onClick() {\n      return handleRoute('/createTrip');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }, \"Create A Trip\"), /*#__PURE__*/React.createElement(\"img\", {\n    src: PlusDark,\n    alt: \"Add\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  })), \"or\", /*#__PURE__*/React.createElement(GroupNavButton, {\n    onClick: function onClick() {\n      return handleRoute('/GroupSettings');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 17\n    }\n  }, \"Group Settings\"), /*#__PURE__*/React.createElement(\"img\", {\n    src: SettingsDark,\n    alt: \"Settings\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 17\n    }\n  })), \"or\", /*#__PURE__*/React.createElement(DeleteGroup, {\n    onClick: DeleteGroupFunction,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 17\n    }\n  }, \"Delete Group\"), /*#__PURE__*/React.createElement(\"img\", {\n    src: TrashDark,\n    alt: \"Delete\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }\n  })), pressedDelete && /*#__PURE__*/React.createElement(HandleGroupDeletion, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 33\n    }\n  })) : /*#__PURE__*/React.createElement(Waiting, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 15\n    }\n  }, \"Group Leader or Co-Leader Needs to Make a Trip\")) : /*#__PURE__*/React.createElement(React.Fragment, null, groupInfo.Leader_ID === userProfile.User_ID || groupInfo.CoLeader_ID === userProfile.User_ID ? /*#__PURE__*/React.createElement(TripNav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(GroupNavButton, {\n    onClick: function onClick() {\n      return handleRoute('/createTrip');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 21\n    }\n  }, \"Create A Trip\"), /*#__PURE__*/React.createElement(\"img\", {\n    src: PlusDark,\n    alt: \"Add\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(GroupNavButton, {\n    onClick: function onClick() {\n      return handleRoute('/GroupSettings');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 21\n    }\n  }, \"Group Settings\"), /*#__PURE__*/React.createElement(\"img\", {\n    src: SettingsDark,\n    alt: \"Settings\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(DeleteGroup, {\n    onClick: DeleteGroupFunction,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 21\n    }\n  }, \"Delete Group\"), /*#__PURE__*/React.createElement(\"img\", {\n    src: TrashDark,\n    alt: \"Delete\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 21\n    }\n  })), pressedDelete && /*#__PURE__*/React.createElement(HandleGroupDeletion, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 37\n    }\n  })) : null, /*#__PURE__*/React.createElement(Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }\n  }, data.Trip_memberships.map(function (trip) {\n    return /*#__PURE__*/React.createElement(Trip, {\n      showAccessTrip: true,\n      tripInfo: trip.Trip,\n      key: trip.Trip_ID,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 25\n      }\n    });\n  }))), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }\n  }));\n}\n\nvar Container = styled.div(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n\"])));\nvar Content = styled.div(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n    display: flex;\\n    flex-direction: column;\\n    padding: 0 10%;\\n    align-items: center;\\n    min-height: calc(100vh - 312px);\\n    align-items: center;\\n\"])));\nvar Title = styled.div(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n  text-align: center;\\n  margin: 75px 0 0;\\n\"])));\nvar NoTrips = styled.div(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  margin-top: 50px;\\n  align-items: center;\\n  min-height: calc(100vh - 207px);\\n\"])));\nvar GroupNavButton = styled.div(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  border: none;\\n  padding: 0px 5px;\\n  border-radius: 20px;\\n  background-color: #308446;\\n  transition: 600ms;\\n  cursor: pointer;\\n  align-items: center;\\n  width: 250px;\\n  margin: 20px 0;\\n  justify-content: center;\\n\\n  p {\\n    color: white;\\n    font-size: 16px;\\n    margin-right: 5px;\\n  }\\n\\n  img{\\n    height: 20px;\\n    width: 20px;\\n  }\\n\\n  &:hover {\\n      transition: 600ms;\\n      transform: scale(1.2);\\n    }\\n\"])));\nvar TripNav = styled.div(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"\\n  margin: 50px auto;\\n  display: flex;\\n  justify-content: space-around;\\n  max-width: 900px;\\n  \\n\"])));\nvar DeleteGroup = styled(GroupNavButton)(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([\"\\n  background-color: #c70000;\\n\\n  img {\\n    width: 20px;\\n    height: 20px;\\n  }\\n\"])));\nvar Waiting = styled.div(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([\"\\n  min-height: calc(100vh - 198px);\\n  text-align: center;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  margin: 0 20%;\\n\"])));\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return state;\n};\n\nexport default connect(mapStateToProps)(MyTrips);","map":{"version":3,"sources":["/home/emily/Documents/spring22/capstone/22A482-TripPlanner/src/Pages/MyTrips.js"],"names":["React","useEffect","styled","Nav","Footer","Trip","gql","useMutation","useQuery","connect","Loading","PlusDark","useNavigate","TrashDark","SettingsDark","MyTrips","props","groupId","groupInfo","console","log","auth","sessionStorage","setItem","JSON","stringify","Group_ID","parse","getItem","userProfile","history","handleRoute","route","DELETE_GROUP","useState","pressedDelete","setPressedDelete","DeleteGroupFunction","HandleGroupDeletion","deleteGroup","proceed","window","confirm","Group_Name","variables","current","location","reload","GET_TRIPS","data","error","loading","isCoLeader","memberships","map","member","User","User_ID","Role","Trip_memberships","length","Leader_ID","includes","CoLeader_ID","trip","Trip_ID","Container","div","Content","Title","NoTrips","GroupNavButton","TripNav","DeleteGroup","Waiting","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react';\nimport styled from 'styled-components';\nimport Nav from '../Components/Nav';\nimport Footer from '../Components/Footer';\nimport Trip from \"../Components/Trip\";\nimport {gql, useMutation, useQuery} from \"@apollo/client\";\nimport {connect} from \"react-redux\";\nimport Loading from '../Components/Loading';\nimport PlusDark from '../Images/Icons/DarkMode/PlusLight.png'\nimport { useNavigate } from \"react-router\";\nimport TrashDark from '../Images/Icons/DarkMode/TrashLight.png'\nimport SettingsDark from '../Images/Icons/DarkMode/SettingsLight.png';\n\nfunction MyTrips(props) {\n  let groupId = null;\n  let groupInfo = null;\n  console.log(props);\n  if (props && props.auth && props.auth.groupInfo) {\n    sessionStorage.setItem('groupInfo', JSON.stringify(props.auth.groupInfo));\n    groupId = props.auth.groupInfo.Group_ID;\n    groupInfo = props.auth.groupInfo;\n  } else {\n    groupInfo = JSON.parse(sessionStorage.getItem('groupInfo'));\n    groupId = groupInfo.Group_ID;\n  }\n\n  const userProfile = props.auth.userProfile;\n\n  console.log(userProfile);\n  console.log(groupInfo);\n\n  const history = useNavigate();\n  function handleRoute(route) {\n      history(route);\n  }\n\n  const DELETE_GROUP = gql`mutation deleteGroup ($Group_ID: Int!){\n    delete_Group_by_pk(Group_ID: $Group_ID) {\n      Group_ID\n    }\n  }`;\n\n  const [pressedDelete, setPressedDelete] = React.useState(false)\n\n  function DeleteGroupFunction() {\n    setPressedDelete(true);\n  }\n\n  const HandleGroupDeletion = () => {\n    const [deleteGroup] = useMutation(DELETE_GROUP);\n\n    if(pressedDelete) {\n      let proceed = window.confirm(`Are you sure you want to delete the ${groupInfo.Group_Name} group`);\n      if (proceed) {\n        console.log(groupId)\n\n        useEffect(() => {\n\n          deleteGroup({\n            variables: {Group_ID: groupId}\n          });\n\n        }, []);\n\n        setPressedDelete(current => !current);\n      }\n    }\n\n    handleRoute('/myGroups')\n    window.location.reload(false);\n    return null;\n  }\n\n\n  const GET_TRIPS = gql`query GetTripTrips ($Group_ID: Int!){\n    Trip_memberships(where: {Group_ID: {_eq: $Group_ID}}) {\n      Trip {\n        Trip_ID\n        Destinations\n        Start_Date\n        End_Date\n        Trip_Bio\n        Trip_Name\n        Trip_Image\n        Departures\n      }\n    }\n}`\n\n  const {data, error, loading} = useQuery(GET_TRIPS, {\n    variables : {Group_ID : groupId}\n  });\n\n  if(loading) {\n    return (\n      <Loading message=\"Time To Hurt The Bank Account...\" />\n    )\n  }\n\n  if(error) {\n    return <p>{error}</p>;\n  }\n\n  const isCoLeader = groupInfo.memberships.map((member) => {\n    if (member.User.User_ID === userProfile.User_ID && member.Role === \"Co-Leader\") {\n      return true;\n    }\n    return false;\n  });\n\n  console.log(isCoLeader);\n  return (\n    <Container>\n      <Nav />\n      <Title>\n        <h1>{groupInfo.Group_Name} Trip's</h1>\n      </Title>\n      <DeleteGroup src={TrashDark}/>\n      {data && data.Trip_memberships.length === 0\n        ? groupInfo.Leader_ID === userProfile.User_ID  || isCoLeader.includes(true)\n          ? <NoTrips>\n              <GroupNavButton onClick={() => handleRoute('/createTrip')}>\n                <p>Create A Trip</p>\n                <img src={PlusDark} alt=\"Add\" />\n              </GroupNavButton>\n              or\n              <GroupNavButton onClick={() => handleRoute('/GroupSettings')}>\n                <p>Group Settings</p>\n                <img src={SettingsDark} alt=\"Settings\" />\n              </GroupNavButton>\n              or\n              <DeleteGroup onClick={DeleteGroupFunction}>\n                <p>Delete Group</p>\n                <img src={TrashDark} alt=\"Delete\" />\n              </DeleteGroup>\n              {pressedDelete && <HandleGroupDeletion />}\n            </NoTrips> \n          : <Waiting>\n              <h1>Group Leader or Co-Leader Needs to Make a Trip</h1>\n            </Waiting>\n        : <>\n            {groupInfo.Leader_ID === userProfile.User_ID  || groupInfo.CoLeader_ID === userProfile.User_ID\n              ?<TripNav>\n                  <GroupNavButton onClick={() => handleRoute('/createTrip')}>\n                    <p>Create A Trip</p>\n                    <img src={PlusDark} alt=\"Add\" />\n                  </GroupNavButton>\n                  <GroupNavButton onClick={() => handleRoute('/GroupSettings')}>\n                    <p>Group Settings</p>\n                    <img src={SettingsDark} alt=\"Settings\" />\n                  </GroupNavButton>\n                  <DeleteGroup onClick={DeleteGroupFunction}>\n                    <p>Delete Group</p>\n                    <img src={TrashDark} alt=\"Delete\" />\n                  </DeleteGroup>\n                  {pressedDelete && <HandleGroupDeletion />}\n                </TripNav>\n              : null }\n            <Content>\n              {data.Trip_memberships.map((trip) => {\n                return (<Trip showAccessTrip  tripInfo={trip.Trip} key={trip.Trip_ID} />);\n              })}\n            </Content>\n          </>}\n        <Footer />\n    </Container>  \n  )\n}\n\nconst Container = styled.div`\n`;\n\nconst Content = styled.div`\n    display: flex;\n    flex-direction: column;\n    padding: 0 10%;\n    align-items: center;\n    min-height: calc(100vh - 312px);\n    align-items: center;\n`;\n\nconst Title = styled.div`\n  text-align: center;\n  margin: 75px 0 0;\n`;\n\nconst NoTrips = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  margin-top: 50px;\n  align-items: center;\n  min-height: calc(100vh - 207px);\n`;\n\nconst GroupNavButton = styled.div`\n  display: flex;\n  border: none;\n  padding: 0px 5px;\n  border-radius: 20px;\n  background-color: #308446;\n  transition: 600ms;\n  cursor: pointer;\n  align-items: center;\n  width: 250px;\n  margin: 20px 0;\n  justify-content: center;\n\n  p {\n    color: white;\n    font-size: 16px;\n    margin-right: 5px;\n  }\n\n  img{\n    height: 20px;\n    width: 20px;\n  }\n\n  &:hover {\n      transition: 600ms;\n      transform: scale(1.2);\n    }\n`;\n\nconst TripNav = styled.div`\n  margin: 50px auto;\n  display: flex;\n  justify-content: space-around;\n  max-width: 900px;\n  \n`;\n\nconst DeleteGroup = styled(GroupNavButton)`\n  background-color: #c70000;\n\n  img {\n    width: 20px;\n    height: 20px;\n  }\n`;\n\nconst Waiting = styled.div`\n  min-height: calc(100vh - 198px);\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin: 0 20%;\n`\n\nconst mapStateToProps = (state) => {\n  return state;\n}\n\nexport default connect(mapStateToProps)(MyTrips);"]},"metadata":{},"sourceType":"module"}