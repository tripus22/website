{"ast":null,"code":"import _taggedTemplateLiteral from \"/home/emily/Documents/spring22/capstone/website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _slicedToArray from \"/home/emily/Documents/spring22/capstone/website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/emily/Documents/spring22/capstone/website/src/Pages/JoinGroup.js\",\n    _templateObject,\n    _templateObject2,\n    _templateObject3,\n    _templateObject4,\n    _templateObject5,\n    _templateObject6,\n    _templateObject7,\n    _templateObject8,\n    _templateObject9,\n    _templateObject10;\n\nimport React, { useEffect, useRef } from \"react\";\nimport styled from \"styled-components\";\nimport { connect } from \"react-redux\";\nimport Nav from \"../Components/Nav\";\nimport Footer from \"../Components/Footer\";\nimport { useNavigate } from \"react-router\";\nimport { auth, signInWithGoogle, logout } from \"../Firebase/firebase\";\nimport Google from '../Images/Icons/Google.png';\nimport { Content } from '../Styles/global';\nimport { gql, useMutation, useQuery } from \"@apollo/client\";\nimport Loading from '../Components/Loading';\n\nfunction JoinGroup(props) {\n  var _this = this;\n\n  var groupid = useRef(null);\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      groupidInput = _React$useState2[0],\n      setGroupIDInput = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      clicked = _React$useState4[0],\n      setClicked = _React$useState4[1];\n\n  var returnid = null;\n  var history = useNavigate();\n\n  function handleRoute(route) {\n    history(route);\n  }\n\n  var handleClick = function handleClick(e) {\n    if (groupid.current.value === \"\") {\n      setGroupIDInput(null);\n    } else {\n      setGroupIDInput(groupid.current.value);\n    } // setClicked(true)\n\n  };\n\n  var CheckBlank = function CheckBlank() {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 16\n      }\n    }, \"Group join code cannot be blank!\");\n  };\n\n  var FIND_GROUP = gql(_templateObject || (_templateObject = _taggedTemplateLiteral([\"query findgroupID ($Join_Code: String!){\\n        Group(where: {Join_Code: {_eq: $Join_Code}}) {\\n            Group_ID,\\n        }\\n    }\"])));\n  var JOIN_GROUP = gql(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"mutation  insert_membership_one($member: membership_insert_input!){\\n        insert_membership_one(object: $member){\\n            User_ID\\n            Group_ID\\n        }\\n    }\"])));\n\n  var JoinGroup = function JoinGroup() {\n    var userObj = {\n      \"User_ID\": sessionStorage.getItem('userId'),\n      \"Group_ID\": returnid\n    };\n\n    var _useMutation = useMutation(JOIN_GROUP),\n        _useMutation2 = _slicedToArray(_useMutation, 2),\n        join_group = _useMutation2[0],\n        _useMutation2$ = _useMutation2[1],\n        data = _useMutation2$.data,\n        loading = _useMutation2$.loading,\n        error = _useMutation2$.error;\n\n    useEffect(function () {\n      join_group({\n        variables: {\n          member: userObj\n        }\n      });\n    }, []);\n    if (loading) return /*#__PURE__*/React.createElement(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 20\n      }\n    }, \"Joining group...\");\n\n    if (data) {\n      window.location.reload();\n      return /*#__PURE__*/React.createElement(\"p\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 20\n        }\n      }, \"Successfully joined group!\");\n    }\n\n    if (error) {\n      return /*#__PURE__*/React.createElement(\"p\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 20\n        }\n      }, \"You are already in the group!\");\n    }\n\n    return null;\n  };\n\n  var SendData = function SendData() {\n    var _useQuery = useQuery(FIND_GROUP, {\n      variables: {\n        Join_Code: groupidInput\n      }\n    }),\n        data = _useQuery.data,\n        error = _useQuery.error,\n        loading = _useQuery.loading;\n\n    if (loading) return /*#__PURE__*/React.createElement(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 20\n      }\n    }, \"Loading...\");\n\n    if (data) {\n      if (data.Group.length > 0) {\n        // console.log(data)\n        returnid = data.Group[0].Group_ID;\n      } else {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 24\n          }\n        }, \"You've entered an invalid group code\");\n      }\n    }\n\n    handleRoute('/MyGroups');\n    return /*#__PURE__*/React.createElement(JoinGroup, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 16\n      }\n    });\n  };\n  /*\n  const SendData = () => {\n      console.log(groupidInput)\n      // console.log(sessionStorage.getItem('userId'))\n      console.log(useQuery(FIND_GROUP, {variables : {Join_Code : groupidInput}}))\n       \n      const userObj = {\n          \"User_ID\": sessionStorage.getItem('userId'),\n          \"Group_ID\": (Number)(useQuery(FIND_GROUP, {variables : {Join_Code : groupidInput}}))\n      }\n       \n      const [join_group, {data,loading,error}] = useMutation(JOIN_GROUP);\n      useEffect(() => {\n          join_group({\n              variables : {member: userObj}\n          });\n      }, []);\n       if (loading)\n          return <p>Updating Group...</p>\n       if (data) {\n          return <p>Group Added!</p>\n      }\n      if (error) {\n          return <p>Invalid Group Code!</p>\n      }\n      return null\n  }\n  */\n\n\n  var handleKeypress = function handleKeypress(e) {\n    //it triggers by pressing the enter key\n    e.preventDefault();\n    console.log(e);\n\n    if (e.type === \"submit\") {\n      handleClick();\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Nav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Content, {\n    theme: props.theme,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(JoinGroupForm, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 21\n    }\n  }, \"Join Group\"), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleKeypress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    theme: props.theme.theme,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    ref: groupid,\n    type: \"text\",\n    name: \"groupID\",\n    min: 1,\n    placeholder: \"Enter Group Join Code:\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 123\n    }\n  })), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(SubmitButton, {\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 29\n    }\n  }, \"Submit\"), groupidInput !== null ? /*#__PURE__*/React.createElement(SendData, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 54\n    }\n  }) : clicked && /*#__PURE__*/React.createElement(CheckBlank, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 79\n    }\n  }))))), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  }));\n}\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return state;\n};\n\nexport default connect(mapStateToProps)(JoinGroup);\nvar Container = styled.div(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n\"])));\nvar JoinGroupForm = styled.div(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n    margin: 0 auto;\\n    border: 2px solid \", \";\\n    border-radius: 4px;\\n    padding: 25px 100px 50px;\\n    display: flex;\\n    flex-direction: column;\\n    align-items: center;\\n    \\n    p {\\n        margin: 0;\\n    }\\n\"])), function (_ref) {\n  var theme = _ref.theme;\n  return theme.toggleBorder;\n});\nvar Title = styled.p(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n    font-size: 36px;\\n    margin: 0 0 50px 0;\\n    font-weight: 700;\\n\"])));\nvar Form = styled.form(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\\n    width: 100%;\\n    margin-top: 20px;\\n\"])));\nvar Row = styled.div(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"\\n    display: flex;\\n    flex-direction: column;\\n\\n    input {\\n        border: none;\\n        outline: none;\\n        padding: 5px;\\n        font-size: 18px;\\n        border-bottom: solid 1px \", \";\\n        background-color: \", \";\\n        color: \", \";\\n\\n        &::placeholder {\\n            color: \", \";\\n            opacity: .6;\\n        }\\n    } \\n    \\n    // label {\\n    //     font-size: 18px;\\n    //     margin-bottom: 5px;\\n    //     font-weight: 700;\\n    // }\\n\"])), function (_ref2) {\n  var theme = _ref2.theme;\n  return theme.text;\n}, function (_ref3) {\n  var theme = _ref3.theme;\n  return theme.body;\n}, function (_ref4) {\n  var theme = _ref4.theme;\n  return theme.text;\n}, function (_ref5) {\n  var theme = _ref5.theme;\n  return theme.text;\n});\nvar GoogleButton = styled.div(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"\\n    width: max-content;\\n    border: 2px solid #4285f4;\\n    padding: 5px 30px;\\n    border-radius: 45px;\\n    display: flex;\\n    align-items: center;\\n    cursor: pointer;\\n    transition: 300ms;\\n    background-color: #4285f4;\\n    margin: 20px 0;\\n\\n    p {\\n        margin-left: 20px;\\n        font-size: 16px;\\n        color: white;\\n        font-weight: 700;\\n    }\\n    \\n    img {\\n        width: 25spx;\\n        height: 25px;\\n        border-radius: 50%;\\n        background-color: white;\\n    }\\n\\n    :hover {\\n        opacity: .8;\\n        transition: 300ms;\\n    }\\n\"])));\nvar SubmitButton = styled(GoogleButton)(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([\"\\n    width: 100%;\\n    background-color: #308446;\\n    border: 2px solid #308446;\\n    display: flex;\\n    justify-content: center;\\n    font-weight: 700;\\n    color: white;\\n\"])));\nvar SignUp = styled.p(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([\"\\n    text-decoration: underline;\\n    cursor: pointer;\\n\"])));","map":{"version":3,"sources":["/home/emily/Documents/spring22/capstone/website/src/Pages/JoinGroup.js"],"names":["React","useEffect","useRef","styled","connect","Nav","Footer","useNavigate","auth","signInWithGoogle","logout","Google","Content","gql","useMutation","useQuery","Loading","JoinGroup","props","groupid","useState","groupidInput","setGroupIDInput","clicked","setClicked","returnid","history","handleRoute","route","handleClick","e","current","value","CheckBlank","FIND_GROUP","JOIN_GROUP","userObj","sessionStorage","getItem","join_group","data","loading","error","variables","member","window","location","reload","SendData","Join_Code","Group","length","Group_ID","handleKeypress","preventDefault","console","log","type","theme","mapStateToProps","state","Container","div","JoinGroupForm","toggleBorder","Title","p","Form","form","Row","text","body","GoogleButton","SubmitButton","SignUp"],"mappings":";;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAAyBC,MAAzB,QAAsC,OAAtC;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,OAAOC,GAAP,MAAgB,mBAAhB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SAASC,WAAT,QAA4B,cAA5B;AACA,SAASC,IAAT,EAAeC,gBAAf,EAAiCC,MAAjC,QAA+C,sBAA/C;AACA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,SAASC,OAAT,QAAwB,kBAAxB;AACA,SAAQC,GAAR,EAAaC,WAAb,EAA0BC,QAA1B,QAAyC,gBAAzC;AACA,OAAOC,OAAP,MAAoB,uBAApB;;AAEA,SAASC,SAAT,CAAmBC,KAAnB,EAA0B;AAAA;;AAEtB,MAAIC,OAAO,GAAGjB,MAAM,CAAC,IAAD,CAApB;;AAFsB,wBAGkBF,KAAK,CAACoB,QAAN,CAAe,IAAf,CAHlB;AAAA;AAAA,MAGfC,YAHe;AAAA,MAGDC,eAHC;;AAAA,yBAIQtB,KAAK,CAACoB,QAAN,CAAe,KAAf,CAJR;AAAA;AAAA,MAIfG,OAJe;AAAA,MAINC,UAJM;;AAMtB,MAAIC,QAAQ,GAAG,IAAf;AAEA,MAAMC,OAAO,GAAGnB,WAAW,EAA3B;;AAEA,WAASoB,WAAT,CAAqBC,KAArB,EAA4B;AACxBF,IAAAA,OAAO,CAACE,KAAD,CAAP;AACH;;AAED,MAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,CAAD,EAAO;AACvB,QAAIX,OAAO,CAACY,OAAR,CAAgBC,KAAhB,KAA0B,EAA9B,EAAkC;AAC9BV,MAAAA,eAAe,CAAC,IAAD,CAAf;AACH,KAFD,MAEO;AACHA,MAAAA,eAAe,CAACH,OAAO,CAACY,OAAR,CAAgBC,KAAjB,CAAf;AACH,KALsB,CAMvB;;AACH,GAPD;;AASA,MAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;AACrB,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAAP;AACH,GAFD;;AAIA,MAAMC,UAAU,GAAGrB,GAAH,8MAAhB;AAMA,MAAMsB,UAAU,GAAGtB,GAAH,wPAAhB;;AAOA,MAAMI,SAAS,GAAG,SAAZA,SAAY,GAAM;AACpB,QAAMmB,OAAO,GAAG;AACZ,iBAAWC,cAAc,CAACC,OAAf,CAAuB,QAAvB,CADC;AAEZ,kBAAYb;AAFA,KAAhB;;AADoB,uBAOuBX,WAAW,CAACqB,UAAD,CAPlC;AAAA;AAAA,QAObI,UAPa;AAAA;AAAA,QAOAC,IAPA,kBAOAA,IAPA;AAAA,QAOKC,OAPL,kBAOKA,OAPL;AAAA,QAOaC,KAPb,kBAOaA,KAPb;;AAQpBzC,IAAAA,SAAS,CAAC,YAAM;AACZsC,MAAAA,UAAU,CAAC;AACPI,QAAAA,SAAS,EAAG;AAACC,UAAAA,MAAM,EAAER;AAAT;AADL,OAAD,CAAV;AAGH,KAJQ,EAIN,EAJM,CAAT;AAMA,QAAIK,OAAJ,EACI,oBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAP;;AAEJ,QAAID,IAAJ,EAAU;AACNK,MAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACA,0BAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAAP;AACH;;AACD,QAAIL,KAAJ,EAAW;AACP,0BAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAAP;AACH;;AACD,WAAO,IAAP;AACH,GAzBD;;AA2BA,MAAMM,QAAQ,GAAG,SAAXA,QAAW,GAAM;AAAA,oBACYjC,QAAQ,CAACmB,UAAD,EAAa;AAChDS,MAAAA,SAAS,EAAG;AAACM,QAAAA,SAAS,EAAG5B;AAAb;AADoC,KAAb,CADpB;AAAA,QACZmB,IADY,aACZA,IADY;AAAA,QACNE,KADM,aACNA,KADM;AAAA,QACCD,OADD,aACCA,OADD;;AAKnB,QAAIA,OAAJ,EACI,oBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAP;;AAEJ,QAAID,IAAJ,EAAU;AACN,UAAIA,IAAI,CAACU,KAAL,CAAWC,MAAX,GAAoB,CAAxB,EAA2B;AACvB;AACA1B,QAAAA,QAAQ,GAAGe,IAAI,CAACU,KAAL,CAAW,CAAX,EAAcE,QAAzB;AACH,OAHD,MAGO;AACH,4BAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDAAP;AACH;AACJ;;AAEDzB,IAAAA,WAAW,CAAC,WAAD,CAAX;AAEA,wBAAO,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACH,GApBD;AAsBA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAKI,MAAM0B,cAAc,GAAG,SAAjBA,cAAiB,CAAAvB,CAAC,EAAI;AACxB;AACAA,IAAAA,CAAC,CAACwB,cAAF;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY1B,CAAZ;;AACA,QAAIA,CAAC,CAAC2B,IAAF,KAAW,QAAf,EAAyB;AACrB5B,MAAAA,WAAW;AACd;AACJ,GAPD;;AASA,sBACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAEI,oBAAC,OAAD;AAAS,IAAA,KAAK,EAAEX,KAAK,CAACwC,KAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI,oBAAC,IAAD;AAAM,IAAA,QAAQ,EAAEL,cAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,GAAD;AAAK,IAAA,KAAK,EAAEnC,KAAK,CAACwC,KAAN,CAAYA,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEI;AAAO,IAAA,GAAG,EAAEvC,OAAZ;AAAqB,IAAA,IAAI,EAAC,MAA1B;AAAiC,IAAA,IAAI,EAAC,SAAtC;AAAgD,IAAA,GAAG,EAAE,CAArD;AAAwD,IAAA,WAAW,EAAC,wBAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,eAEkG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFlG,CADJ,eAKI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,YAAD;AAAc,IAAA,OAAO,EAAEU,WAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,EAEKR,YAAY,KAAK,IAAjB,gBAAwB,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAxB,GAAsCE,OAAO,iBAAI,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFtD,CALJ,CAFJ,CADJ,CAFJ,eAkBI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAlBJ,CADJ;AAsBH;;AAGD,IAAMoC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,KAAD,EAAW;AAC/B,SAAOA,KAAP;AACH,CAFD;;AAIA,eAAexD,OAAO,CAACuD,eAAD,CAAP,CAAyB1C,SAAzB,CAAf;AAEA,IAAM4C,SAAS,GAAG1D,MAAM,CAAC2D,GAAV,yEAAf;AAGA,IAAMC,aAAa,GAAG5D,MAAM,CAAC2D,GAAV,ySAEK;AAAA,MAAGJ,KAAH,QAAGA,KAAH;AAAA,SAAeA,KAAK,CAACM,YAArB;AAAA,CAFL,CAAnB;AAcA,IAAMC,KAAK,GAAG9D,MAAM,CAAC+D,CAAV,+IAAX;AAMA,IAAMC,IAAI,GAAGhE,MAAM,CAACiE,IAAV,kHAAV;AAKA,IAAMC,GAAG,GAAGlE,MAAM,CAAC2D,GAAV,uiBAS0B;AAAA,MAAGJ,KAAH,SAAGA,KAAH;AAAA,SAAeA,KAAK,CAACY,IAArB;AAAA,CAT1B,EAUmB;AAAA,MAAGZ,KAAH,SAAGA,KAAH;AAAA,SAAeA,KAAK,CAACa,IAArB;AAAA,CAVnB,EAWQ;AAAA,MAAGb,KAAH,SAAGA,KAAH;AAAA,SAAeA,KAAK,CAACY,IAArB;AAAA,CAXR,EAcY;AAAA,MAAGZ,KAAH,SAAGA,KAAH;AAAA,SAAeA,KAAK,CAACY,IAArB;AAAA,CAdZ,CAAT;AA0BA,IAAME,YAAY,GAAGrE,MAAM,CAAC2D,GAAV,6oBAAlB;AAgCA,IAAMW,YAAY,GAAGtE,MAAM,CAACqE,YAAD,CAAT,uPAAlB;AAUA,IAAME,MAAM,GAAGvE,MAAM,CAAC+D,CAAV,kIAAZ","sourcesContent":["import React, {useEffect,useRef} from \"react\";\nimport styled from \"styled-components\";\nimport {connect} from \"react-redux\";\nimport Nav from \"../Components/Nav\";\nimport Footer from \"../Components/Footer\";\nimport { useNavigate } from \"react-router\";\nimport { auth, signInWithGoogle, logout } from \"../Firebase/firebase\";\nimport Google from '../Images/Icons/Google.png';\nimport { Content } from '../Styles/global';\nimport {gql, useMutation, useQuery} from \"@apollo/client\";\nimport Loading from '../Components/Loading';\n\nfunction JoinGroup(props) {\n\n    let groupid = useRef(null);\n    const [groupidInput, setGroupIDInput] = React.useState(null);\n    const [clicked, setClicked] = React.useState(false)\n\n    let returnid = null;\n\n    const history = useNavigate();\n\n    function handleRoute(route) {\n        history(route);\n    }\n\n    const handleClick = (e) => {\n        if (groupid.current.value === \"\") {\n            setGroupIDInput(null)\n        } else {\n            setGroupIDInput(groupid.current.value);\n        }\n        // setClicked(true)\n    };\n\n    const CheckBlank = () => {\n        return <p>Group join code cannot be blank!</p>\n    }\n\n    const FIND_GROUP = gql`query findgroupID ($Join_Code: String!){\n        Group(where: {Join_Code: {_eq: $Join_Code}}) {\n            Group_ID,\n        }\n    }`\n\n    const JOIN_GROUP = gql`mutation  insert_membership_one($member: membership_insert_input!){\n        insert_membership_one(object: $member){\n            User_ID\n            Group_ID\n        }\n    }`\n\n    const JoinGroup = () => {\n        const userObj = {\n            \"User_ID\": sessionStorage.getItem('userId'),\n            \"Group_ID\": returnid\n        }\n\n        \n        const [join_group, {data,loading,error}] = useMutation(JOIN_GROUP);\n        useEffect(() => {\n            join_group({\n                variables : {member: userObj}\n            });\n        }, []);\n\n        if (loading)\n            return <p>Joining group...</p>\n\n        if (data) {\n            window.location.reload();\n            return <p>Successfully joined group!</p>\n        }\n        if (error) {\n            return <p>You are already in the group!</p>\n        }\n        return null\n    }\n\n    const SendData = () => {\n        const {data, error, loading} = useQuery(FIND_GROUP, {\n            variables : {Join_Code : groupidInput}\n        })\n\n        if (loading)\n            return <p>Loading...</p>\n\n        if (data) {\n            if (data.Group.length > 0) {\n                // console.log(data)\n                returnid = data.Group[0].Group_ID;\n            } else {\n                return <p>You've entered an invalid group code</p>\n            }\n        }\n\n        handleRoute('/MyGroups')\n\n        return <JoinGroup/>\n    }\n\n    /*\n    const SendData = () => {\n        console.log(groupidInput)\n        // console.log(sessionStorage.getItem('userId'))\n        console.log(useQuery(FIND_GROUP, {variables : {Join_Code : groupidInput}}))\n\n        \n        const userObj = {\n            \"User_ID\": sessionStorage.getItem('userId'),\n            \"Group_ID\": (Number)(useQuery(FIND_GROUP, {variables : {Join_Code : groupidInput}}))\n        }\n\n        \n        const [join_group, {data,loading,error}] = useMutation(JOIN_GROUP);\n        useEffect(() => {\n            join_group({\n                variables : {member: userObj}\n            });\n        }, []);\n\n        if (loading)\n            return <p>Updating Group...</p>\n\n        if (data) {\n            return <p>Group Added!</p>\n        }\n        if (error) {\n            return <p>Invalid Group Code!</p>\n        }\n        return null\n    }\n    */\n    const handleKeypress = e => {\n        //it triggers by pressing the enter key\n        e.preventDefault();\n        console.log(e)\n        if (e.type === \"submit\") {\n            handleClick();\n        }\n    };\n\n    return (\n        <Container>\n            <Nav />\n            <Content theme={props.theme}>\n                <JoinGroupForm>\n                    <Title>Join Group</Title>\n                    <Form onSubmit={handleKeypress}>\n                        <Row theme={props.theme.theme}>\n                            {/* <label>Email:</label> */}\n                            <input ref={groupid} type=\"text\" name=\"groupID\" min={1} placeholder=\"Enter Group Join Code:\"/><br></br>\n                        </Row>\n                        <Row>\n                            <SubmitButton onClick={handleClick}>Submit</SubmitButton>\n                            {groupidInput !== null ? <SendData/> : clicked && <CheckBlank/>}\n                        </Row>\n\n                    </Form>\n                </JoinGroupForm>\n            </Content>\n            <Footer />\n        </Container>\n    )\n}\n\n\nconst mapStateToProps = (state) => {\n    return state;\n}\n\nexport default connect(mapStateToProps)(JoinGroup);\n\nconst Container = styled.div`\n`;\n\nconst JoinGroupForm = styled.div`\n    margin: 0 auto;\n    border: 2px solid ${({ theme }) => theme.toggleBorder};\n    border-radius: 4px;\n    padding: 25px 100px 50px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    \n    p {\n        margin: 0;\n    }\n`;\n\nconst Title = styled.p`\n    font-size: 36px;\n    margin: 0 0 50px 0;\n    font-weight: 700;\n`;\n\nconst Form = styled.form`\n    width: 100%;\n    margin-top: 20px;\n`;\n\nconst Row = styled.div`\n    display: flex;\n    flex-direction: column;\n\n    input {\n        border: none;\n        outline: none;\n        padding: 5px;\n        font-size: 18px;\n        border-bottom: solid 1px ${({ theme }) => theme.text};\n        background-color: ${({ theme }) => theme.body};\n        color: ${({ theme }) => theme.text};\n\n        &::placeholder {\n            color: ${({ theme }) => theme.text};\n            opacity: .6;\n        }\n    } \n    \n    // label {\n    //     font-size: 18px;\n    //     margin-bottom: 5px;\n    //     font-weight: 700;\n    // }\n`;\n\nconst GoogleButton = styled.div`\n    width: max-content;\n    border: 2px solid #4285f4;\n    padding: 5px 30px;\n    border-radius: 45px;\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n    transition: 300ms;\n    background-color: #4285f4;\n    margin: 20px 0;\n\n    p {\n        margin-left: 20px;\n        font-size: 16px;\n        color: white;\n        font-weight: 700;\n    }\n    \n    img {\n        width: 25spx;\n        height: 25px;\n        border-radius: 50%;\n        background-color: white;\n    }\n\n    :hover {\n        opacity: .8;\n        transition: 300ms;\n    }\n`;\n\nconst SubmitButton = styled(GoogleButton)`\n    width: 100%;\n    background-color: #308446;\n    border: 2px solid #308446;\n    display: flex;\n    justify-content: center;\n    font-weight: 700;\n    color: white;\n`;\n\nconst SignUp = styled.p`\n    text-decoration: underline;\n    cursor: pointer;\n`;"]},"metadata":{},"sourceType":"module"}