{"ast":null,"code":"import _slicedToArray from \"/home/emily/Documents/spring22/capstone/22A482-TripPlanner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/home/emily/Documents/spring22/capstone/22A482-TripPlanner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _templateObject,\n    _templateObject2,\n    _jsxFileName = \"/home/emily/Documents/spring22/capstone/22A482-TripPlanner/src/Components/FlightCard.js\",\n    _templateObject3,\n    _templateObject4,\n    _templateObject5,\n    _templateObject6,\n    _templateObject7,\n    _templateObject8,\n    _templateObject9;\n\nimport React from 'react';\nimport styled from 'styled-components';\nimport Arrow from '../Images/arrow.png';\nimport American from '../Images/American.png';\nimport { connect } from \"react-redux\";\nimport Moment from \"react-moment\";\nimport Liked from '../Images/Icons/liked.png';\nimport unLiked from '../Images/Icons/unliked.png';\nimport { gql } from '@apollo/client';\nimport { useMutation } from '@apollo/client';\nimport { store } from '../store/TripUsStore';\n\nfunction FlightCard(props) {\n  var _this = this;\n\n  var tripId = null;\n  var tripInfo = null; // console.log(props);\n\n  if (props && props.auth && props.auth.tripInfo) {\n    sessionStorage.setItem('tripInfo', JSON.stringify(props.auth.tripInfo));\n    tripId = props.auth.tripInfo.Trip_ID;\n    tripInfo = props.auth.tripInfo;\n  } else {\n    tripInfo = JSON.parse(sessionStorage.getItem('tripInfo'));\n    tripId = tripInfo.Trip_ID;\n    store.dispatch({\n      type: 'TRIP_INFO',\n      payload: tripInfo\n    });\n  }\n\n  var upVote = gql(_templateObject || (_templateObject = _taggedTemplateLiteral([\"mutation update_Trip_Flights ($Trip_Flights_ID: Int!) {\\n        update_Trip_Flights_by_pk(\\n            pk_columns: {Trip_Flights_ID: $Trip_Flights_ID}, \\n            _inc: { Upvotes: 1 }\\n            ) {\\n            Upvotes\\n        }\\n      }\"])));\n  var downVote = gql(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"mutation update_Trip_Flights ($Trip_Flights_ID: Int!) {\\n        update_Trip_Flights_by_pk(\\n            pk_columns: {Trip_Flights_ID: $Trip_Flights_ID}, \\n            _inc: { Upvotes: -1 }\\n            ) {\\n            Upvotes\\n        }\\n      }\"])));\n\n  var _useMutation = useMutation(upVote),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      TripLikes = _useMutation2[0];\n\n  var _useMutation3 = useMutation(downVote),\n      _useMutation4 = _slicedToArray(_useMutation3, 1),\n      TripUnLike = _useMutation4[0];\n\n  var _React$useState = React.useState(unLiked),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      heartType = _React$useState2[0],\n      setHeartImage = _React$useState2[1];\n\n  var handleHeart = function handleHeart() {\n    if (heartType === unLiked) {\n      TripLikes({\n        variables: {\n          Trip_Flights_ID: props.auth.tripInfo.Trip_ID\n        }\n      });\n      setHeartImage(Liked);\n    } else {\n      TripUnLike({\n        variables: {\n          Trip_Flights_ID: props.auth.tripInfo.Trip_ID\n        }\n      });\n      setHeartImage(unLiked);\n    }\n  };\n\n  var baseAPIPath = props.flight.slice_data.slice_0;\n  var durationString;\n  var duration = baseAPIPath.info.duration;\n  duration = duration.split(\":\");\n\n  if (duration[0] === \"00\" && duration[1] === \"00\") {\n    durationString = \"\".concat(parseInt(duration[2]), \"m\");\n  } else if (duration[0] === \"00\") {\n    durationString = \"\".concat(parseInt(duration[1]), \"h \").concat(parseInt(duration[2]), \"m\");\n  } else {\n    durationString = \"\".concat(parseInt(duration[0]), \"d \").concat(parseInt(duration[1]), \"h \").concat(parseInt(duration[2]), \"m\");\n  }\n\n  var stopCountString;\n  var flightNumber;\n  var departureTime = baseAPIPath.flight_data.flight_0.departure.datetime.time_12h;\n  var arrivalTime = baseAPIPath.flight_data.flight_0.arrival.datetime.time_12h;\n\n  if (parseInt(Object.keys(baseAPIPath.flight_data).length) === 1) {\n    stopCountString = \"Nonstop\";\n    flightNumber = \"Flight #\".concat(baseAPIPath.flight_data.flight_0.info.flight_number);\n  } else if (parseInt(Object.keys(baseAPIPath.flight_data).length) === 2) {\n    stopCountString = \"\".concat(Object.keys(baseAPIPath.flight_data).length - 1, \" Stop\");\n    arrivalTime = baseAPIPath.flight_data.flight_1.arrival.datetime.time_12h;\n    flightNumber = \"Multiple Flights\";\n  } else {\n    var lastFlight = Object.keys(baseAPIPath.flight_data).at(-1);\n    stopCountString = \"\".concat(Object.keys(baseAPIPath.flight_data).length - 1, \" Stops\");\n    arrivalTime = baseAPIPath.flight_data[lastFlight].arrival.datetime.time_12h;\n    flightNumber = \"Multiple Flights\";\n  }\n\n  var FlightDate = function FlightDate() {\n    if (baseAPIPath.departure.datetime.date === baseAPIPath.arrival.datetime.date) {\n      return /*#__PURE__*/React.createElement(AirPortCode, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 20\n        }\n      }, /*#__PURE__*/React.createElement(Moment, {\n        format: \"MMMM Do\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 33\n        }\n      }, baseAPIPath.departure.datetime.date));\n    } else {\n      return /*#__PURE__*/React.createElement(AirPortCode, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 20\n        }\n      }, /*#__PURE__*/React.createElement(Moment, {\n        format: \"MMMM Do\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 33\n        }\n      }, baseAPIPath.departure.datetime.date), \" - \", /*#__PURE__*/React.createElement(Moment, {\n        format: \"MMMM Do\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 108\n        }\n      }, baseAPIPath.arrival.datetime.date));\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Card, {\n    theme: props.theme.theme,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Heart, {\n    onClick: handleHeart,\n    src: heartType,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Airport, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    center: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }, baseAPIPath.departure && baseAPIPath.departure.airport && /*#__PURE__*/React.createElement(AirPortCode, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 80\n    }\n  }, baseAPIPath.departure.airport.name, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 129\n    }\n  }), \"(\", baseAPIPath.departure.airport.code, \")\")), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }\n  }, \"Departs\"), baseAPIPath.flight_data.flight_0.departure && baseAPIPath.flight_data.flight_0.departure.datetime && /*#__PURE__*/React.createElement(FlightTime, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 123\n    }\n  }, departureTime)), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }, baseAPIPath.flight_data.flight_0 && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 58\n    }\n  }, flightNumber), baseAPIPath.flight_data.flight_0 && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 58\n    }\n  }, stopCountString))), /*#__PURE__*/React.createElement(FlightDuration, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, baseAPIPath.departure && baseAPIPath.departure.datetime && baseAPIPath.arrival.datetime && /*#__PURE__*/React.createElement(FlightDate, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 109\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    src: Arrow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }\n  }), baseAPIPath.info && baseAPIPath.info.duration && /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      fontSize: '24px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 67\n    }\n  }, durationString), baseAPIPath && baseAPIPath.airline && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 56\n    }\n  }, baseAPIPath.airline.name), baseAPIPath && baseAPIPath.airline && baseAPIPath.airline.logo && /*#__PURE__*/React.createElement(\"img\", {\n    style: {\n      width: '40px',\n      height: '40px',\n      marginBottom: '0'\n    },\n    src: baseAPIPath.airline.logo,\n    alt: baseAPIPath.airline.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 84\n    }\n  })), /*#__PURE__*/React.createElement(Airport, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    center: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }\n  }, baseAPIPath.arrival && baseAPIPath.arrival.airport && /*#__PURE__*/React.createElement(AirPortCode, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 76\n    }\n  }, baseAPIPath.arrival.airport.name, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 123\n    }\n  }), \"(\", baseAPIPath.arrival.airport.code, \")\")), /*#__PURE__*/React.createElement(Row, {\n    end: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 21\n    }\n  }, \"Arrives\"), baseAPIPath.flight_data.flight_0.arrival && baseAPIPath.flight_data.flight_0.arrival.datetime && /*#__PURE__*/React.createElement(FlightTime, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 119\n    }\n  }, arrivalTime)), /*#__PURE__*/React.createElement(Row, {\n    end: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 17\n    }\n  }, baseAPIPath.flight_data.flight_0 && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 58\n    }\n  }, baseAPIPath.flight_data.flight_0.info.cabin_name), baseAPIPath.flight_data.flight_0 && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 58\n    }\n  }, \"Base Fare: $\", props.flight.price_details.baseline_base_fare))));\n}\n\nvar Card = styled.div(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n    width: 900px;\\n    border: 3px solid \", \";\\n    margin-bottom: 25px;\\n    background-color: \", \";\\n    border-radius: 4px;\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: center;\\n\"])), function (_ref) {\n  var theme = _ref.theme;\n  return theme.cardBorder;\n}, function (_ref2) {\n  var theme = _ref2.theme;\n  return theme.body;\n});\nvar Heart = styled.img(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n    position: relative;\\n    bottom: 100px;\\n    left: 850px;\\n    cursor: pointer;\\n\"])));\nvar FlightDuration = styled.div(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n    display: flex;\\n    flex-direction: column;\\n    align-items: center;\\n    padding: 25px 0;\\n\\n    img {\\n        margin: 10px 0;\\n    }\\n\\n    p {\\n        margin: 0;\\n    }\\n\"])));\nvar Airport = styled.div(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\\n    flex: 1 0;\\n    display: flex;\\n    flex-direction: column;\\n    margin: 0 20px;\\n\"])));\nvar Row = styled.div(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"\\n    margin: 10px 0;\\n    display: flex;\\n    flex-direction: column;\\n\\n    margin: \", \";\\n\\n    align-items: \", \";\\n\\n    p {\\n        margin: 0;\\n    }\\n    \\n\"])), function (props) {\n  return props.center && '10px auto';\n}, function (props) {\n  return props.end ? 'flex-end' : 'flex-start';\n});\nvar AirPortCode = styled.p(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"\\n    font-size: 24px;\\n\"])));\nvar FlightTime = styled.p(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([\"\\n    font-size: 30px;\\n\"])));\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return state;\n};\n\nexport default connect(mapStateToProps)(FlightCard);","map":{"version":3,"sources":["/home/emily/Documents/spring22/capstone/22A482-TripPlanner/src/Components/FlightCard.js"],"names":["React","styled","Arrow","American","connect","Moment","Liked","unLiked","gql","useMutation","store","FlightCard","props","tripId","tripInfo","auth","sessionStorage","setItem","JSON","stringify","Trip_ID","parse","getItem","dispatch","type","payload","upVote","downVote","TripLikes","TripUnLike","useState","heartType","setHeartImage","handleHeart","variables","Trip_Flights_ID","baseAPIPath","flight","slice_data","slice_0","durationString","duration","info","split","parseInt","stopCountString","flightNumber","departureTime","flight_data","flight_0","departure","datetime","time_12h","arrivalTime","arrival","Object","keys","length","flight_number","flight_1","lastFlight","at","FlightDate","date","theme","airport","name","code","fontSize","airline","logo","width","height","marginBottom","cabin_name","price_details","baseline_base_fare","Card","div","cardBorder","body","Heart","img","FlightDuration","Airport","Row","center","end","AirPortCode","p","FlightTime","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React from 'react'\nimport styled from 'styled-components'\nimport Arrow from '../Images/arrow.png';\nimport American from '../Images/American.png';\nimport {connect} from \"react-redux\";\nimport Moment from \"react-moment\";\nimport Liked from '../Images/Icons/liked.png';\nimport unLiked from '../Images/Icons/unliked.png';\nimport { gql } from '@apollo/client';\nimport { useMutation } from '@apollo/client';\nimport { store } from '../store/TripUsStore';\n\nfunction FlightCard(props) {\n    let tripId = null;\n    let tripInfo = null;\n    // console.log(props);\n    if (props && props.auth && props.auth.tripInfo) {\n        sessionStorage.setItem('tripInfo', JSON.stringify(props.auth.tripInfo));\n        tripId = props.auth.tripInfo.Trip_ID;\n        tripInfo = props.auth.tripInfo;\n    } else {\n        tripInfo = JSON.parse(sessionStorage.getItem('tripInfo'));\n        tripId = tripInfo.Trip_ID;\n        store.dispatch({type: 'TRIP_INFO', payload: tripInfo});\n    }\n\n\n    const upVote = gql`mutation update_Trip_Flights ($Trip_Flights_ID: Int!) {\n        update_Trip_Flights_by_pk(\n            pk_columns: {Trip_Flights_ID: $Trip_Flights_ID}, \n            _inc: { Upvotes: 1 }\n            ) {\n            Upvotes\n        }\n      }`\n\n    const downVote = gql`mutation update_Trip_Flights ($Trip_Flights_ID: Int!) {\n        update_Trip_Flights_by_pk(\n            pk_columns: {Trip_Flights_ID: $Trip_Flights_ID}, \n            _inc: { Upvotes: -1 }\n            ) {\n            Upvotes\n        }\n      }`\n\n    const [TripLikes] = useMutation(upVote);\n    const [TripUnLike] = useMutation(downVote);\n    const [heartType, setHeartImage] = React.useState(unLiked);\n\n    const handleHeart = () => {\n        if (heartType === unLiked) {\n            TripLikes({\n                variables : { Trip_Flights_ID: props.auth.tripInfo.Trip_ID }\n            });\n\n            setHeartImage(Liked)\n        } else {\n            TripUnLike({\n                variables : { Trip_Flights_ID: props.auth.tripInfo.Trip_ID }\n            });\n\n            setHeartImage(unLiked)\n        }\n    }\n\n    const baseAPIPath = props.flight.slice_data.slice_0;\n    let durationString\n    let duration = baseAPIPath.info.duration;\n    duration = duration.split(\":\")\n    if (duration[0] === \"00\" && duration[1] === \"00\") {\n        durationString = `${parseInt(duration[2])}m`\n    } else if (duration[0] === \"00\") {\n        durationString = `${parseInt(duration[1])}h ${parseInt(duration[2])}m`\n    } else {\n        durationString = `${parseInt(duration[0])}d ${parseInt(duration[1])}h ${parseInt(duration[2])}m`\n    }\n\n    let stopCountString;\n    let flightNumber;\n    const departureTime = baseAPIPath.flight_data.flight_0.departure.datetime.time_12h;\n    let arrivalTime = baseAPIPath.flight_data.flight_0.arrival.datetime.time_12h;\n    if (parseInt(Object.keys(baseAPIPath.flight_data).length) === 1) {\n        stopCountString = \"Nonstop\"\n        flightNumber = `Flight #${baseAPIPath.flight_data.flight_0.info.flight_number}`;\n    } else if (parseInt(Object.keys(baseAPIPath.flight_data).length) === 2) {\n        stopCountString = `${Object.keys(baseAPIPath.flight_data).length - 1} Stop`;\n        arrivalTime = baseAPIPath.flight_data.flight_1.arrival.datetime.time_12h;\n        flightNumber = \"Multiple Flights\";\n    } else {\n        const lastFlight = Object.keys(baseAPIPath.flight_data).at(-1);\n        stopCountString = `${Object.keys(baseAPIPath.flight_data).length - 1} Stops`;\n        arrivalTime = baseAPIPath.flight_data[lastFlight].arrival.datetime.time_12h;\n        flightNumber = \"Multiple Flights\";\n    }\n\n    const FlightDate = () => {\n        if (baseAPIPath.departure.datetime.date === baseAPIPath.arrival.datetime.date) {\n            return <AirPortCode><Moment format='MMMM Do'>{baseAPIPath.departure.datetime.date}</Moment></AirPortCode>\n        } else {\n            return <AirPortCode><Moment format='MMMM Do'>{baseAPIPath.departure.datetime.date}</Moment > - <Moment format=\"MMMM Do\">{baseAPIPath.arrival.datetime.date}</Moment></AirPortCode>\n        }    \n    }\n\n\n\n  return (\n        <Card theme={props.theme.theme}>\n            <Heart onClick={handleHeart} src={heartType} />\n            <Airport>\n                <Row center>\n                    {baseAPIPath.departure && baseAPIPath.departure.airport && <AirPortCode>{baseAPIPath.departure.airport.name}<br></br>({baseAPIPath.departure.airport.code})</AirPortCode>}\n                </Row>\n                <Row>\n                    <p>Departs</p>\n                    {baseAPIPath.flight_data.flight_0.departure && baseAPIPath.flight_data.flight_0.departure.datetime && <FlightTime>{departureTime}</FlightTime>}\n                </Row>\n                <Row>\n                    {baseAPIPath.flight_data.flight_0 && <p>{flightNumber}</p>}\n                    {baseAPIPath.flight_data.flight_0 && <p>{stopCountString}</p>}\n                </Row>\n            </Airport>\n            <FlightDuration>\n                {baseAPIPath.departure && baseAPIPath.departure.datetime && baseAPIPath.arrival.datetime && <FlightDate />}\n\n                <img src={Arrow} />\n                {baseAPIPath.info && baseAPIPath.info.duration && <p style={{fontSize: '24px'}}>{durationString}</p>}\n                {baseAPIPath && baseAPIPath.airline && <p>{baseAPIPath.airline.name}</p>}\n                {baseAPIPath && baseAPIPath.airline && baseAPIPath.airline.logo && <img style={{width: '40px', height: '40px', marginBottom: '0'}} src={baseAPIPath.airline.logo} alt={baseAPIPath.airline.name} />}\n            </FlightDuration>\n\n            <Airport>\n                <Row center>\n                    {baseAPIPath.arrival && baseAPIPath.arrival.airport && <AirPortCode>{baseAPIPath.arrival.airport.name}<br></br>({baseAPIPath.arrival.airport.code})</AirPortCode>}\n                </Row>\n                <Row end>\n                    <p>Arrives</p>\n                    {baseAPIPath.flight_data.flight_0.arrival && baseAPIPath.flight_data.flight_0.arrival.datetime && <FlightTime>{arrivalTime}</FlightTime>}\n                </Row>\n                <Row end>\n                    {baseAPIPath.flight_data.flight_0 && <p>{baseAPIPath.flight_data.flight_0.info.cabin_name}</p>}\n                    {baseAPIPath.flight_data.flight_0 && <p>Base Fare: ${props.flight.price_details.baseline_base_fare}</p>}\n                </Row>\n            </Airport>\n        </Card>\n  )\n}\n\nconst Card = styled.div`\n    width: 900px;\n    border: 3px solid ${({ theme }) => theme.cardBorder};\n    margin-bottom: 25px;\n    background-color: ${({ theme }) => theme.body};\n    border-radius: 4px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n`;\n\nconst Heart = styled.img`\n    position: relative;\n    bottom: 100px;\n    left: 850px;\n    cursor: pointer;\n`;\n\nconst FlightDuration = styled.div`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    padding: 25px 0;\n\n    img {\n        margin: 10px 0;\n    }\n\n    p {\n        margin: 0;\n    }\n`;\n\nconst Airport = styled.div`\n    flex: 1 0;\n    display: flex;\n    flex-direction: column;\n    margin: 0 20px;\n`;\n\nconst Row = styled.div`\n    margin: 10px 0;\n    display: flex;\n    flex-direction: column;\n\n    margin: ${props => props.center && '10px auto'};\n\n    align-items: ${props => props.end ? 'flex-end' : 'flex-start'};\n\n    p {\n        margin: 0;\n    }\n    \n`;\n\nconst AirPortCode = styled.p`\n    font-size: 24px;\n`;\n\nconst FlightTime = styled.p`\n    font-size: 30px;\n`;\n\nconst mapStateToProps = (state) => {\n    return state;\n  }\n  \n  export default connect(mapStateToProps)(FlightCard);"]},"metadata":{},"sourceType":"module"}